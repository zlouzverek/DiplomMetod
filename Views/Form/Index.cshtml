@using DiplomMetod.Data.Entites
@model IEnumerable<Form>;



<h1 class="mb-4">Методические рекомендации</h1>
@await Html.PartialAsync("Search");

<div class="table-responsive">
<table class="table table-striped table-bordered">
    <thead class="thead-dark">
        <tr>
            <th>Инвернатрынй №</th>
            <th>Тип формы</th>
            <th>Реквизит</th>
            <th>Код</th>
            <th>Справочник</th> 
            <th>Ключевые слова</th> 
            <th>№ разъяснения</th>
            <th>Дата разъяснения</th>
            <th>Организация</th>
            <th>Согласовано с ГП</th>
            <th>Уровень (фед/мес)</th>
            <th>Актуальность</th>
            <th>Регион (подразделение)</th>
            <th>Примечание</th>
            <th>Избранное</th>
            <th>Скачать файл</th>
            <th>Действия</th>

        </tr>
    </thead>
    <tbody>

        @foreach (var item in Model)
        {
            <tr>
                <th>@Html.DisplayNameFor(model => model.InventoryNumber)</th>
                <th>@Html.DisplayNameFor(model => model.FormType.Name)</th>
                <th>@Html.DisplayNameFor(model => model.RequisiteNumber)</th>
                <th>@Html.DisplayNameFor(model => model.Code)</th>
                <th>@Html.DisplayNameFor(model => model.ReferenceBook)</th>  <!--#FIXME: почему тут ругается на ReferenceBook.Name -->
                <!--#FIXME: Попытка несколько KeyWords??? -->
                <td> 
                        @if (item.KeyWords != null && item.KeyWords.Any())
                        {
                            @string.Join(", ", item.KeyWords.Select(k => k.Name))
                        }
                    </td> 
                <th>@Html.DisplayNameFor(model => model.Explanation.Number)</th>
                <th>@Html.DisplayNameFor(model => model.Explanation.Data)</th>
                <th>@Html.DisplayNameFor(model => model.Explanation.Organization)</th>
                    <th>@Html.DisplayNameFor(model => model.Explanation.IsAgreedGenProk ? "да" : "нет")</th>
                <th>@Html.DisplayNameFor(model => model.Explanation.ApproveLevel)</th>
                <th>@Html.DisplayNameFor(model => model.Explanation.IsRevelant ? "актуально" : "не актуально")</th>
                <th>@Html.DisplayNameFor(model => model.RegionsDivision)</th>
                <th>@Html.DisplayNameFor(model => model.Explanation.Comment)</th>
                    <th>@Html.DisplayNameFor(model => model.Explanation.IsFavorites ? "да" : "нет")</th>
                <th>@Html.DisplayNameFor(model => model.FileLink)</th>

                <td>
                    <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-sm btn-warning">Редактировать</a>
                    <a asp-action="Details" asp-route-id="@item.FormType.Name" class="btn btn-sm btn-info">Просмотр</a>
                    <a asp-action="Delete" asp-route-id="@item.FormType.Name" class="btn btn-sm btn-danger">Удалить</a>
                </td>
            </tr>

                <!--#FIXME: Добавить кнопку экспорт в Excel -->
                <!--#FIXME: Добавить кнопку экспорт в Pdf -->
        }
    </tbody>
</table>
</div>